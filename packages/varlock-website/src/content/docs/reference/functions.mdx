---
title: Resolver functions
description: A comprehensive reference of all available function resolvers in varlock
---

You may use _resolver functions_ instead of static values within both config items and decorator values.

Functions can be composed together to create more complex value resolution logic.
```env-spec
ITEM=fn(arg1, arg2)
COMPOSITION=fn1(fn1Arg1, fn2(fn2Arg1, fn2Arg2))
```


Note that many built-in utility functions have _expansion_ equivalents and often it will be more clear to use them that way. For example:
```env-spec
EXPANSION_EQUIVALENT="pre-${OTHER}-post"
USING_FN_CALLS=concat("pre-", ref(OTHER), "-post")

# mixed example
CONFIG=exec(`aws ssm get-parameter --name "/config/${APP_ENV}" --with-decryption`)
```


Currently, there are built-in utility functions, and soon there will be functions to handle values encrypted using varlock provided tools.

Plugins may also register additional resolvers - which can be used to generate and transform values, or fetch data from external providers.


<div class="reference-docs">
<div>
### `ref()`

References another config item (env var) - which is useful when composing multiple functions together.

Expansion equivalent: `ref(OTHER_VARL)` === `${OTHER_VAR}` (and also `$OTHER_VAR`)

We recommend using the bracketed version within string templates, and the simpler version when referencing an item directly.

```env-spec "ref"
API_URL=https://api.example.com
USERS_API_URL=${API_URL}/users
USERS_API_URL2=concat(ref("API_URL"), "/users") # without using expansion
```
</div>

<div>
### `concat()`

Concatenates multiple values into a single string.

Expansion uses `concat()` to combine multiple parts of strings when they include multiple parts.

```env-spec "concat"
PATH=concat("base/", ref("APP_ENV"), "/config.json")
PATH2=`base/${APP_ENV}/config.json` # equivalent using expansion
```
</div>

<div>
### `exec()`

Executes a CLI command and uses its output as the value. This is particularly useful for integrating with external tools and services.

NOTE - many CLI tools output an additional newline. `exec()` will trim this automatically.

Expansion equivalent: `exec(command)` === `$(command)`

```env-spec "exec"
# Using 1Password CLI
API_KEY=exec(`op read "op://dev test/service x/api key"`)
# Using AWS CLI
AWS_CREDENTIALS=exec(`aws sts get-session-token --profile prod`)
```
</div>

<div>
### `fallback()`

Returns the first non-empty value in a list of possible values.

```env-spec "fallback"
POSSIBLY_EMPTY=
ANOTHER=
EXAMPLE=fallback(ref(POSSIBLY_EMPTY), ref(ANOTHER), "default-val")
```
</div>

<div>
### `remap()`

Maps a value to a new value based on a set of remapping rules. This is useful for translating one value, often provided by an external platform, into another.

- The first argument is the value to remap (often a `ref()` to another variable).
- All following arguments are key=value pairs, where the key is the new value and the value is what to match against, which can be a string, `undefined`, or a `regex()` call.
- If no match is found, the original value is returned.

```env-spec "remap"
# env var that is set by CI/platform
CI_BRANCH=

# @type=enum(development, preview, production)
APP_ENV=remap($CI_BRANCH, production="main", preview=regex(.*), development=undefined)
```
</div>

<div>
### `regex()`

Creates a regular expression for use in other functions, such as `remap()`.

- Takes a single string argument, which is the regex pattern (using JavaScript regex syntax)
- **This cannot be used as a standalone value. It must be used only as a function argument.**

```env-spec "regex"
# Example usage within remap
ENV_TYPE=remap($APP_ENV, dev=regex("^dev.*"), prod="production")
```
</div>

<div>
### `forEnv()`

Resolves to a boolean, if the current [environment](/reference/root-decorators/#currentenv) matches any in the
list passed in as args.

**Requirements:**
- Requires an [`@currentEnv`](/reference/root-decorators/#currentenv) to be set in your `.env.schema` file
- Takes one or more environment names as arguments

```env-spec /forEnv\\(.*\\)/
# @currentEnv=$APP_ENV @defaultRequired=false
# @disable=forEnv(test)  # entire file will be disabled if env is test
# ---
APP_ENV=staging

# Required only in development
# @required=forEnv(development)
DEV_API_KEY=

# Required in staging and production
# @required=forEnv(staging, production)
PROD_API_KEY=
```
</div>


<div>
### `eq()`

Checks if 2 values are equal and resolves to a boolean.

```env-spec "regex"
IS_STAGING_DEPLOYMENT=eq($GIT_BRANCH, "staging")
```
</div>

<div>
### `if()`

Checks a boolean to return a true/false option

```env-spec "regex"
API_URL=if(eq($GIT_BRANCH, "main"), api.example.com, staging-api.example.com)
```
</div>

<div>
### `not()`

Negates a value and returns a boolean. Falsy values are - `false`, `""`, `0`, `undefined`, and will be negated to `true`. Otherwise will return `false`.

```env-spec "not"
# Negate the result of another function
SHOULD_DISABLE_FEATURE=not(forEnv(production))
```
</div>

<div>
### `isEmpty()`

Returns `true` if the value is `undefined` or an empty string, `false` otherwise.

```env-spec "isEmpty"
# Check if a value is empty
HAS_API_KEY=not(isEmpty($API_KEY))

# Use with conditional logic
API_URL=if(isEmpty($CUSTOM_API_URL), "https://api.default.com", $CUSTOM_API_URL)
```
</div>

</div>
